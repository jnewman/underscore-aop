/**
 * @license
 * underscore-aop 0.5.1 https://github.com/jnewman/underscore-aop/blob/master/LICENSE.txt
 * Build time: 2013-07-23P23:07:34
 * Fork of: dojo/aspect.js 1.8.3 http://dojotoolkit.org/license
 */
;!function(a,b){"use strict";var c=function(){var b;try{b=require("underscore")}catch(c){try{b=require("lodash")}catch(c){b=a._}}if("function"!=typeof b)throw new TypeError("underscoreLike function not found.");return b}();"function"==typeof define&&define.amd?define(function(){return b(c)}):"object"==typeof module&&module.exports?module.exports=b(c):c.aop=b(c)}(this,function(a){"use strict";function b(a,b,c,d){var f,h=a[b],i="around"===b;if(i){var j=c(function(){return h.advice(this,arguments)});f={remove:function(){f.cancelled=!0,delete e[a._uaopId]},advice:function(a,b){return f.cancelled?h.advice(a,b):j.apply(a,b)}}}else f={remove:function(){var c=f.previous,d=f.next;d||c?(c?c.next=d:a[b]=d,d&&(d.previous=c)):(delete a[b],delete e[a._uaopId])},id:g++,advice:c,receiveArguments:d};if(h&&!i)if("after"===b){for(;h.next&&(h=h.next););h.next=f,f.previous=h}else"before"===b&&(a[b]=f,f.next=h,h.previous=f);else a[b]=f;return f}function c(a){return function(c,d,h,i){var j,k=c[d];k&&k.target===c||(c[d]=j=function(){for(var a=arguments,b=j.before;b;)a=b.advice.apply(this,a)||a,b=b.next;var c;j.around&&(c=j.around.advice(this,a));for(var d,e=j.after;e&&e.id<g;)e.receiveArguments?(d=e.advice.apply(this,a),c=void 0===d?c:d):c=e.advice.call(this,c,a),e=e.next;return c},k&&(j.around={advice:function(a,b){return k.apply(a,b)}}),j._uaopId=k._uaopId?k._uaopId:k._uaopId=f++,j._uaopId&&(e[j._uaopId]=j),j.target=c);var l=b(j||k,a,h,i);return h=null,l}}var d=Array.prototype.slice,e={},f=0,g=0,h=[],i=function(a){var b=c("before")(a,"bind",function(a){var b=d.call(arguments,0),c=a._uaopId;c||(c=a._uaopId=f++);var g=b[0]=function(){return(e[c]||a).apply(this,arguments)};return g._uaopId=c,b});return h.push(b),b},j=function(a){return c(a).apply(this,d.call(arguments,1))},k=i(a),l={before:c("before"),around:c("around"),after:c("after"),wrapLib:function(a){return i(a)},unwrapLib:function(){k.remove()},_dispatchers:e},m=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};return m(j,l)});