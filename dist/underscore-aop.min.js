/**
 * @license
 * underscore-aop 0.4.1 https://github.com/jnewman/underscore-aop/blob/master/LICENSE.txt
 * Build time: 2013-05-10P21:05:08
 * Fork of: dojo/aspect.js 1.8.3 http://dojotoolkit.org/license
 */
;(function(e){"use strict";var r="function"==typeof define&&define.amd,n="object"==typeof exports&&exports,t="object"==typeof module&&module&&module.exports==n&&module,o=function(){var e;try{e=require("underscore")}catch(r){try{e=require("lodash")}catch(r){e=window._}}if("function"!=typeof e)throw new TypeError("underscoreLike function not found.");return e},u=null;if(r)define(["underscore"],function(){return e(o())});else if(n&&!n.nodeType)u=e(o()),t?(t.exports=u).aop=u:n.aop=u;else{var a=o();a.aop=e(a)}})(function(){"use strict";function e(e,r,n,o){var a,i=e[r],c="around"===r;if(c){var d=n(function(){return i.advice(this,arguments)});a={remove:function(){a.cancelled=!0,delete t[e._uaopId]},advice:function(e,r){return a.cancelled?i.advice(e,r):d.apply(e,r)}}}else a={remove:function(){var n=a.previous,o=a.next;o||n?(n?n.next=o:e[r]=o,o&&(o.previous=n)):(delete e[r],delete t[e._uaopId])},id:u++,advice:n,receiveArguments:o};if(i&&!c)if("after"===r){for(;i.next&&(i=i.next););i.next=a,a.previous=i}else"before"===r&&(e[r]=a,a.next=i,i.previous=a);else e[r]=a;return a}function r(r){return function(n,a,i,c){var d,f=n[a];f&&f.target===n||(n[a]=d=function(){for(var e=arguments,r=d.before;r;)e=r.advice.apply(this,e)||e,r=r.next;var n;d.around&&(n=d.around.advice(this,e));for(var t,o=d.after;o&&u>o.id;)o.receiveArguments?(t=o.advice.apply(this,e),n=void 0===t?n:t):n=o.advice.call(this,n,e),o=o.next;return n},f&&(d.around={advice:function(e,r){return f.apply(e,r)}}),d._uaopId=f._uaopId?f._uaopId:f._uaopId=o++,d._uaopId&&(t[d._uaopId]=d),d.target=n);var p=e(d||f,r,i,c);return i=null,p}}var n=Array.prototype.slice,t={},o=0,u=0,a=[],i=function(e){var u=r("before")(e,"bind",function(e){var r=n.call(arguments,0),u=e._uaopId;u||(u=e._uaopId=o++);var a=r[0]=function a(){return(t[u]||e).apply(this,arguments)};return a._uaopId=u,r});return a.push(u),u},c=function(e){return r(e).apply(this,n.call(arguments,1))},d={before:r("before"),around:r("around"),after:r("after"),wrapLib:function(e){return i(e)},_dispatchers:t},f=function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e};return f(c,d)});