/**
 * @license
 * underscore-aop 0.3.3 https://github.com/jnewman/underscore-aop/blob/master/LICENSE.txt
 * Build time: 2013-04-22P22:04:21
 * Fork of: dojo/aspect.js 1.8.3 http://dojotoolkit.org/license
 */
;(function(e){"use strict";var r="function"==typeof define&&define.amd,n="object"==typeof exports&&exports,t="object"==typeof module&&module&&module.exports==n&&module,o=function(){var e;try{e=require("underscore")}catch(r){try{e=require("lodash")}catch(r){e=window._}}if("function"!=typeof e)throw new TypeError("underscoreLike function not found.");return e},u=null;if(r)define(function(){return e(o())});else if(n&&!n.nodeType)u=e(o()),t?(t.exports=u).aop=u:n.aop=u;else{var a=o();a.aop=e(a)}})(function(e){"use strict";function r(e,r,n,t){var u,i=e[r],c="around"===r;if(c){var d=n(function(){return i.advice(this,arguments)});u={remove:function(){u.cancelled=!0,delete o[e._uaopId]},advice:function(e,r){return u.cancelled?i.advice(e,r):d.apply(e,r)}}}else u={remove:function(){var n=u.previous,t=u.next;t||n?(n?n.next=t:e[r]=t,t&&(t.previous=n)):(delete e[r],delete o[e._uaopId])},id:a++,advice:n,receiveArguments:t};if(i&&!c)if("after"===r){for(;i.next&&(i=i.next););i.next=u,u.previous=i}else"before"===r&&(e[r]=u,u.next=i,i.previous=u);else e[r]=u;return u}function n(e){return function(n,t,i,c){var d,f=n[t];f&&f.target===n||(n[t]=d=function(){for(var e=arguments,r=d.before;r;)e=r.advice.apply(this,e)||e,r=r.next;var n;d.around&&(n=d.around.advice(this,e));for(var t,o=d.after;o&&a>o.id;)o.receiveArguments?(t=o.advice.apply(this,e),n=void 0===t?n:t):n=o.advice.call(this,n,e),o=o.next;return n},f&&(d.around={advice:function(e,r){return f.apply(e,r)}}),d._uaopId=f._uaopId?f._uaopId:f._uaopId=u++,d._uaopId&&(o[d._uaopId]=d),d.target=n);var p=r(d||f,e,i,c);return i=null,p}}var t=Array.prototype.slice,o={},u=0,a=0;n("before")(e,"bind",function(e){var r=t.call(arguments,0),n=e._uaopId;n||(n=e._uaopId=u++);var a=r[0]=function a(){return(o[n]||e).apply(this,arguments)};return a._uaopId=n,r});var i=function(e){return n(e).apply(this,t.call(arguments,1))},c={before:n("before"),around:n("around"),after:n("after"),_dispatchers:o},d=function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e};return d(i,c)});