/**
 * @license
 * underscore-aop 0.3.0 https://github.com/jnewman/underscore-aop/blob/master/LICENSE.txt
 * Build time: 2013-04-17P22:04:19
 * Fork of: dojo/aspect.js 1.8.3 http://dojotoolkit.org/license
 */
;(function(e){"use strict";var r="function"==typeof define&&define.amd,n="object"==typeof exports&&exports,t="object"==typeof module&&module&&module.exports==n&&module,o=function(){var e;try{e=require("underscore")}catch(r){try{e=require("lodash")}catch(r){e=window._}}if("function"!=typeof e)throw new TypeError("underscoreLike function not found.");return e},a=null;if(r)define(function(){return e(o())});else if(n&&!n.nodeType)a=e(o()),t?(t.exports=a).aop=a:n.aop=a;else{var u=o();u.aop=e(u)}})(function(e){"use strict";function r(e,r,n,t){var o,u=e[r],i="around"==r;if(i){var c=n(function(){return u.advice(this,arguments)});o={remove:function(){o.cancelled=!0},advice:function(e,r){return o.cancelled?u.advice(e,r):c.apply(e,r)}}}else o={remove:function(){var n=o.previous,t=o.next;t||n?(n?n.next=t:e[r]=t,t&&(t.previous=n)):delete e[r]},id:a++,advice:n,receiveArguments:t};if(u&&!i)if("after"===r){for(;u.next&&(u=u.next););u.next=o,o.previous=u}else"before"===r&&(e[r]=o,o.next=u,u.previous=o);else e[r]=o;return o}function n(e){return function(n,o,u,i){var c,f=n[o];f&&f.target===n||(n[o]=c=function(){for(var e=arguments,r=c.before;r;)e=r.advice.apply(this,e)||e,r=r.next;var n;c.around&&(n=c.around.advice(this,e));for(var t,o=c.after;o&&a>o.id;)o.receiveArguments?(t=o.advice.apply(this,e),n=void 0===t?n:t):n=o.advice.call(this,n,e),o=o.next;return n},f&&(c.around={advice:function(e,r){return f.apply(e,r)}}),c._uaopId=f._uaopId,t[c._uaopId]=c,c.target=n);var d=r(c||f,e,u,i);return u=null,d}}var t={},o=0,a=0;n("before")(e,"bind",function(r){var n=e.toArray(arguments),a=r._uaopId;a||(a=r._uaopId=o++);var u=n[0]=function u(){return(t[a]||r).apply(this,arguments)};return u._uaopId=a,n});var u=Array.prototype.slice,i=function(e,r){return r=u.call(arguments,1),n(e).apply(this,r)},c={before:n("before"),around:n("around"),after:n("after")};for(var f in c)c.hasOwnProperty(f)&&(i[f]=c[f]);return i});